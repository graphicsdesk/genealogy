(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(e,t,n){var a={".":4,"./":4,"./Image":18,"./Image.js":18,"./ImageVeil":19,"./ImageVeil.js":19,"./imageAssets/ancestral-map.jpg":119,"./imageAssets/poem.jpg":120,"./imageAssets/portraits.jpg":121,"./imageAssets/women.jpg":122,"./index":4,"./index.js":4};function i(e){var t=r(e);return n(t)}function r(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id=118},119:function(e,t,n){e.exports=n.p+"static/media/ancestral-map.d04420a2.jpg"},120:function(e,t,n){e.exports=n.p+"static/media/poem.d585b53b.jpg"},121:function(e,t,n){e.exports=n.p+"static/media/portraits.c29e8623.jpg"},122:function(e,t,n){e.exports=n.p+"static/media/women.4c418c48.jpg"},123:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(49),s=n.n(r),o=n(50),l=n.n(o),c=n(1),m=n.n(c),h=n(12),p=n.n(h),u=n(20),d=n(6),g=n(7),f=n(9),y=n(8),v=n(10),b=n(30),w=n(29),x=function(){var e={};return function(t){return t in e?e[t]:e[t]=p()()}},E=function(e,t){return Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(function(n){return t.hasOwnProperty(n)&&e[n]===t[n]})},j=x(),I=x(),k=function(){return i.a.createElement("filter",{id:"drop-shadow-filter",height:"130%"},i.a.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"7"}),i.a.createElement("feOffset",{dx:"1",dy:"8",result:"offsetblur"}),i.a.createElement("feComponentTransfer",null,i.a.createElement("feFuncA",{type:"linear",slope:"0.5"})),i.a.createElement("feMerge",null,i.a.createElement("feMergeNode",null),i.a.createElement("feMergeNode",{in:"SourceGraphic"})))},O=n(4),S='500 1rem "Atlas Grotesk"',T={frontText:{font:S,fill:"#fff",transitionDuration:"0.3s"},backText:{font:S,stroke:"#333",strokeWidth:2,opacity:.8,strokeLinejoin:"round",strokeLinecap:"round"}},A=m()(T)(function(e){var t=e.classes,n=e.dims,r=e.text,s=n.x,o=n.y,l=n.height,c={x:s,y:o};return o>12?c.y-=10:c.y+=l+6,i.a.createElement(a.Fragment,null,i.a.createElement("text",Object.assign({className:t.backText},c),r),i.a.createElement("text",Object.assign({className:t.frontText},c),r))}),D=function(e){var t=e.graphicId,n=e.dims;return i.a.createElement("clipPath",{id:j(t)},i.a.createElement("rect",Object.assign({},n,{rx:3,ry:3})))},L={show:{animationDuration:500,animation:"fadeIn"},hide:{animationDuration:500,animation:"fadeOut"},"@keyframes fadeIn":{from:{opacity:0},to:{opacity:1}},"@keyframes fadeOut":{from:{opacity:1},to:{opacity:0}}},N=function(e){var t=function(t){function n(){var e,t;Object(d.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=Object(f.a)(this,(e=Object(y.a)(n)).call.apply(e,[this].concat(i)))).state={transitioning:!0,dims:t.props.dims,label:t.props.label},t}return Object(v.a)(n,t),Object(g.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this,n=e.dims,a=e.label,i=this.props,r=i.dims,s=i.label;E(e.dims,this.props.dims)||(function(e,t){var n=e.width,a=e.height,i=t.width,r=t.height;return Math.abs(a/n-r/i)<.001}(e.dims,this.props.dims)&&a===s?this.setState({dims:r}):0!==n.width||0!==n.height?(this.setState({transitioning:!0,dims:n,label:a}),setTimeout(function(){t.setState({transitioning:!1,dims:r,label:s})},500)):r.width>0&&r.height>0&&this.setState({transitioning:!1,dims:r,label:s}))}},{key:"render",value:function(){var t=this.state.transitioning,n=this.props.classes;return i.a.createElement("g",{className:t?n.hide:n.show},i.a.createElement(e,Object.assign({},this.props,this.state)))}}]),n}(a.Component);return m()(L)(t)}(function(e){var t=e.graphicId,n=e.dims,r=e.label;return i.a.createElement(a.Fragment,null,i.a.createElement("defs",null,i.a.createElement(D,{dims:n,graphicId:t})),i.a.createElement("use",{xlinkHref:"#".concat(I(t)),clipPath:"url(#".concat(j(t),")")}),i.a.createElement(A,{dims:n,text:r}))}),W=1.46875,X={top:20,right:20,bottom:24,left:20},C=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(f.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(i)))).state={height:null,leftImgX:null,rightImgX:null,imgY:null,imgWidth:null,imgHeight:null},n.updateDimensions=function(){var e=document.body.clientWidth,t=window.innerHeight,a=t-X.top-X.bottom,i=a/W,r=X.top;e>512?2*i>e&&(i=(e-X.left-X.right)/2):i=e-X.left-X.right,a=i*W,r+=(t-X.top-X.bottom-a)/2,n.setState({width:e,height:t,leftImgX:e/2-i,rightImgX:e/2,imgY:r,imgWidth:i,imgHeight:a})},n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.updateDimensions(),e.debouncedUpdateDimensions=function(e,t){var n;return function(){for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];clearTimeout(n),n=setTimeout(function(){n=null,e.apply(void 0,i)},t)}}(e.updateDimensions,250),window.addEventListener("resize",e.debouncedUpdateDimensions)},0);var t=window.innerHeight;this.setState({height:t,imgHeight:t-X.top-X.bottom})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.debouncedUpdateDimensions)}},{key:"render",value:function(){var e=this.state,t=e.width,n=e.height,a=e.leftImgX,r=e.rightImgX,s=e.imgY,o=e.imgWidth,l=e.imgHeight,c=this.props,m=c.classes,h=c.graphicId,p=c.leftImg,d=c.rightImg,g=c.clip,f=g.clipLabel,y={leftX:a,rightX:r,y:s,width:o,height:l},v=function(e,t){var n=e.leftX,a=e.y,i=e.width,r=e.height;return{x:n+t.x*i,y:a+t.y*r,width:t.w*i,height:t.h*r}}(y,Object(u.a)(g,["clipLabel"])),b=0;return t<=512&&(b=Math.max(X.left-v.x,-o/2)),i.a.createElement("svg",{width:t,height:n},i.a.createElement("g",{className:m.container,style:{transform:"translate(".concat(b,"px, 0px)")}},i.a.createElement(k,null),i.a.createElement("g",{id:I(h),style:{filter:"url(#".concat("drop-shadow-filter",")")}},i.a.createElement(O.Image,{dims:y,name:p,leftSide:!0}),i.a.createElement(O.Image,{dims:y,name:d})),i.a.createElement(O.ImageVeil,{dims:y}),i.a.createElement(N,{graphicId:h,dims:v,label:f})))}}]),t}(a.Component),H=m()({container:{transitionDuration:"0.6s"}})(C),M={marginBottom:"70vh",display:"flex"},U={Graphic:{marginBottom:"5vh"},sticky:{position:"sticky",top:0},steps:{WebkitTransform:"translate3d(0, 0, 0)",padding:"0 7vw 120vh 7vw","& > div > div:last-child":{marginBottom:0}},leftStep:Object(b.a)({},M,{justifyContent:"flex-start"}),rightStep:Object(b.a)({},M,{justifyContent:"flex-end"}),stepText:{backgroundColor:"#fff",boxShadow:"0 5px 15px 0 rgba(0,0,0,0.41)",maxWidth:"500px",textAlign:"center",color:"#222",padding:"1rem",fontSize:"1.1rem",fontFamily:"Merriweather",fontWeight:400,lineHeight:"1.9rem"},"@media (max-width: 767px)":{steps:{padding:"0 5vw 130vh 5vw"}},"@media (max-width: 575px)":{leftStep:{justifyContent:"center"},rightStep:{justifyContent:"center"}}},B=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(f.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(i)))).state={clip:{clipLabel:"",x:0,y:0,w:0,h:0}},n.onStepEnter=function(e){var t=e.data,a=(t.text,Object(u.a)(t,["text"]));E(n.state.clip,a)||n.setState({clip:a})},n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.state.clip,t=this.props,n=t.classes,a=t.id,r=t.leftImg,s=t.rightImg,o=t.steps;return i.a.createElement("div",{className:n.Graphic},i.a.createElement("figure",{className:n.sticky},i.a.createElement(H,{graphicId:a,leftImg:r,rightImg:s,clip:e})),i.a.createElement("article",{className:n.steps},i.a.createElement(w.Scrollama,{onStepEnter:this.onStepEnter},o.map(function(e){return i.a.createElement(w.Step,{key:e.text,data:e},i.a.createElement("div",{className:e.x<1?n.rightStep:n.leftStep},i.a.createElement("p",{className:n.stepText,dangerouslySetInnerHTML:{__html:e.text}})))}))))}}]),t}(a.PureComponent),F=m()(U)(B),G=l.a.load("\n[graphics]\n\nleftImg: poem.jpg\nrightImg: women.jpg\n\n[.steps]\n\ntext: These records (known as <i>jia pu</i>) may hold poems that vocalize the ache of missing a beloved family member next to a quiet, moonlit stream centuries ago;\nx: 0.01\ny: 0.01\nw: 0.98\nh: 0.98\n\ntext: The highlighted poem is entitled, \u201cWhile staying in the Pei Household I reminisce about an elder of the family\u201d, by Ma Dai.\nx: 0.38\ny: 0.04\nw: 0.2\nh: 0.90\nclipLabel:\n\ntext: Create visuals with the translation of the poem!\nx: 0.38\ny: 0.04\nw: 0.2\nh: 0.90\nclipLabel:\n\ntext: They could carry proud accounts of noteworthy women in the family.\nx: 1.01\ny: 0.01\nw: 0.98\nh: 0.98\nclipLabel:\n\n[]\n\nleftImg: ancestral-map.jpg\nrightImg: portraits.jpg\n\n[.steps]\n\ntext: They might map out the <i>fengshui</i> of an ancestral burial site so that future generations may pay their respect to their ancestors.\nx: 0.26\ny: 0.32\nw: 0.48\nh: 0.58\nclipLabel:\n\ntext: And they might provide portraits of the noblemen from whom the family descends.\nx: 1\ny: 0.11\nw: 1\nh: 0.54\nclipLabel:\n\n[]\n\n{}\n").graphics,P=function(e){return e.map(function(e){return{text:e.text,x:+e.x,y:+e.y,w:+e.w,h:+e.h,clipLabel:e.clipLabel}})},z=m()({App:{margin:"70vh 0"}})(function(e){var t=e.classes;return i.a.createElement("div",{className:t.App},G.map(function(e){var t=e.leftImg,n=e.rightImg,a=e.steps,r=p()();return i.a.createElement(F,{key:r,id:r,leftImg:t,rightImg:n,steps:P(a)})}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},18:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a);t.default=function(e){var t=e.dims,a=e.name,r=e.leftSide,s=void 0!==r&&r,o=t.leftX,l=t.rightX,c=t.y,m=t.width,h=t.height;return i.a.createElement("image",{x:s?o:l,y:c,width:m,height:h,xlinkHref:n(118)("".concat("./imageAssets","/").concat(a))})}},19:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(1),s=n.n(r);t.default=s()({mask:{fill:"#000",fillOpacity:.35}})(function(e){var t=e.classes,n=e.dims,a=n.leftX,r=n.y,s=n.width,o=n.height;return i.a.createElement("rect",{className:t.mask,x:a,y:r,width:2*s,height:o})})},4:function(e,t,n){"use strict";n.r(t);var a=n(18);n.d(t,"Image",function(){return a.default});var i=n(19);n.d(t,"ImageVeil",function(){return i.default})},53:function(e,t,n){e.exports=n(123)}},[[53,1,2]]]);
//# sourceMappingURL=main.114eeb55.chunk.js.map