(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(e,t,n){var a={".":4,"./":4,"./Image":18,"./Image.js":18,"./ImageVeil":19,"./ImageVeil.js":19,"./imageAssets/ancestral-map.jpg":118,"./imageAssets/portraits.jpg":119,"./index":4,"./index.js":4};function i(e){var t=r(e);return n(t)}function r(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id=117},118:function(e,t,n){e.exports=n.p+"static/media/ancestral-map.d04420a2.jpg"},119:function(e,t,n){e.exports=n.p+"static/media/portraits.c29e8623.jpg"},120:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(48),s=n.n(r),o=n(49),l=n.n(o),c=n(2),m=n.n(c),h=n(12),u=n.n(h),p=n(20),g=n(6),d=n(7),f=n(9),y=n(8),b=n(10),v=n(29),x=function(){var e={};return function(t){return t in e?e[t]:e[t]=u()()}},w=function(e,t){return Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(function(n){return t.hasOwnProperty(n)&&e[n]===t[n]})},E=x(),I=x(),j=function(){return i.a.createElement("filter",{id:"drop-shadow-filter",height:"130%"},i.a.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"7"}),i.a.createElement("feOffset",{dx:"1",dy:"8",result:"offsetblur"}),i.a.createElement("feComponentTransfer",null,i.a.createElement("feFuncA",{type:"linear",slope:"0.5"})),i.a.createElement("feMerge",null,i.a.createElement("feMergeNode",null),i.a.createElement("feMergeNode",{in:"SourceGraphic"})))},k=n(4),O='500 1rem "Atlas Grotesk"',S={frontText:{font:O,fill:"#fff",transitionDuration:"0.3s"},backText:{font:O,stroke:"#333",strokeWidth:2,opacity:.8,strokeLinejoin:"round",strokeLinecap:"round"}},T=m()(S)(function(e){var t=e.classes,n=e.dims,r=e.text,s=n.x,o=n.y,l=n.height,c={x:s,y:o};return o>12?c.y-=10:c.y+=l+6,i.a.createElement(a.Fragment,null,i.a.createElement("text",Object.assign({className:t.backText},c),r),i.a.createElement("text",Object.assign({className:t.frontText},c),r))}),N=function(e){var t=e.graphicId,n=e.dims;return i.a.createElement("clipPath",{id:E(t)},i.a.createElement("rect",Object.assign({},n,{rx:3,ry:3})))},L={show:{animationDuration:500,animation:"fadeIn"},hide:{animationDuration:500,animation:"fadeOut"},"@keyframes fadeIn":{from:{opacity:0},to:{opacity:1}},"@keyframes fadeOut":{from:{opacity:1},to:{opacity:0}}},A=function(e){var t=function(t){function n(){var e,t;Object(g.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=Object(f.a)(this,(e=Object(y.a)(n)).call.apply(e,[this].concat(i)))).state={transitioning:!0,dims:t.props.dims,label:t.props.label},t}return Object(b.a)(n,t),Object(d.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this,n=e.dims,a=e.label,i=this.props,r=i.dims,s=i.label;w(e.dims,this.props.dims)||a===s||(n.width+n.height!==0?(console.log("entering transition"),this.setState({transitioning:!0,dims:n,label:a}),setTimeout(function(){console.log("exiting transition"),t.setState({transitioning:!1,dims:r,label:s})},500)):this.setState({transitioning:!1,dims:r,label:s}))}},{key:"render",value:function(){var t=this.state.transitioning,n=this.props.classes;return i.a.createElement("g",{className:t?n.hide:n.show},i.a.createElement(e,Object.assign({},this.props,this.state)))}}]),n}(a.Component);return m()(L)(t)}(function(e){var t=e.graphicId,n=e.dims,r=e.label;return i.a.createElement(a.Fragment,null,i.a.createElement("defs",null,i.a.createElement(N,{dims:n,graphicId:t})),i.a.createElement("use",{xlinkHref:"#".concat(I(t)),clipPath:"url(#".concat(E(t),")")}),i.a.createElement(T,{dims:n,text:r}))}),X=1.46875,W={top:20,right:20,bottom:24,left:20},D=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(f.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(i)))).state={height:null,leftImgX:null,rightImgX:null,imgY:null,imgWidth:null,imgHeight:null},n.updateDimensions=function(){var e=document.body.clientWidth,t=n.state.imgHeight/X;n.setState({leftImgX:e/2-t,rightImgX:e/2,imgY:W.top,imgWidth:t})},n}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.updateDimensions()},0);var t=window.innerHeight;this.setState({height:t,imgHeight:t-W.top-W.bottom})}},{key:"render",value:function(){var e=this.state,t=e.height,n=e.leftImgX,a=e.rightImgX,r=e.imgY,s=e.imgWidth,o=e.imgHeight,l=this.props,c=l.graphicId,m=l.leftImg,h=l.rightImg,u=l.clip,g=u.clipLabel,d={leftX:n,rightX:a,y:r,width:s,height:o},f=function(e,t){var n=e.leftX,a=e.y,i=e.width,r=e.height;return{x:n+t.x*i,y:a+t.y*r,width:t.w*i,height:t.h*r}}(d,Object(p.a)(u,["clipLabel"]));return i.a.createElement("svg",{width:document.body.clientWidth,height:t},i.a.createElement(j,null),i.a.createElement("g",{id:I(c),style:{filter:"url(#".concat("drop-shadow-filter",")")}},i.a.createElement(k.Image,{dims:d,name:m,leftSide:!0}),i.a.createElement(k.Image,{dims:d,name:h})),i.a.createElement(k.ImageVeil,{dims:d}),i.a.createElement(A,{graphicId:c,dims:f,label:g}))}}]),t}(a.Component),H=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(f.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(i)))).state={clip:{clipLabel:"",x:0,y:0,w:0,h:0}},n.onStepEnter=function(e){var t=e.data,a=(t.text,Object(p.a)(t,["text"]));w(n.state.clip,a)||n.setState({clip:a})},n}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.clip,t=this.props,n=t.classes,a=t.id,r=t.leftImg,s=t.rightImg,o=t.steps;return i.a.createElement("div",{className:n.Graphic},i.a.createElement("figure",{className:n.sticky},i.a.createElement(D,{graphicId:a,leftImg:r,rightImg:s,clip:e})),i.a.createElement("article",{className:n.steps},i.a.createElement(v.Scrollama,{onStepEnter:this.onStepEnter},o.map(function(e){return i.a.createElement(v.Step,{key:e.text,data:e},i.a.createElement("div",{className:n.step},i.a.createElement("p",{className:n.stepText},e.text)))}))))}}]),t}(a.PureComponent),M=m()({Graphic:{marginBottom:"5vh"},sticky:{position:"sticky",top:0},steps:{WebkitTransform:"translate3d(0, 0, 0)",padding:"0 5vw 130vh 5vw"},step:{position:"relative",backgroundColor:"#fff",boxShadow:"0 5px 15px 0 rgba(0,0,0,0.41)",margin:"0 auto 70vh auto",maxWidth:"500px","&:last-child":{marginBottom:0}},stepText:{textAlign:"center",color:"#222",padding:"1rem",fontSize:"1.1rem",fontFamily:"Merriweather",fontWeight:400,lineHeight:"1.9rem"}})(H),C=l.a.load("\n[graphics]\n\nleftImg: ancestral-map.jpg\nrightImg: portraits.jpg\n\n[.steps]\n\ntext: These records (known as jia pu) held poems that made me feel the warmth of the sun after a spring rain in the high mountains centuries ago;\nx: 1.13\ny: 0.67\nw: 0.27\nh: 0.26\nclipLabel: Elegant poem\n\ntext: They carry proud claims to being descendents of emperors and men of impeccable name and character.\nx: 1\ny: 0.12\nw: 1\nh: 0.52\nclipLabel: Men wearing vegetables\n\n[]\n\nleftImg: portraits.jpg\nrightImg: ancestral-map.jpg\n\n[.steps]\n\ntext: They spell out instructions from the family about which professions are preferred by the family line.\nx: 1.13\ny: 0.67\nw: 0.27\nh: 0.26\nclipLabel: Instructions\n\ntext: Or they might provide a detailed account of the heirlooms within your family hundreds of years ago\u2026\nx: 1\ny: 0.12\nw: 1\nh: 0.52\nclipLabel: Texts\n\ntext: \u2026down to the minute decorations on a pair of emerald earrings.\nx: 0.3\ny: 0.14\nw: 0.9\nh: 0.3\nclipLabel: Emerald earrings\n\n[]\n\n{}\n").graphics,B=function(e){return e.map(function(e){return{text:e.text,x:+e.x,y:+e.y,w:+e.w,h:+e.h,clipLabel:e.clipLabel}})},F=m()({App:{margin:"70vh 0"}})(function(e){var t=e.classes;return i.a.createElement("div",{className:t.App},C.map(function(e){var t=e.leftImg,n=e.rightImg,a=e.steps,r=u()();return i.a.createElement(M,{key:r,id:r,leftImg:t,rightImg:n,steps:B(a)})}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},18:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a);t.default=function(e){var t=e.dims,a=e.name,r=e.leftSide,s=void 0!==r&&r,o=t.leftX,l=t.rightX,c=t.y,m=t.width,h=t.height;return i.a.createElement("image",{x:s?o:l,y:c,width:m,height:h,xlinkHref:n(117)("".concat("./imageAssets","/").concat(a))})}},19:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(2),s=n.n(r);t.default=s()({mask:{fill:"#000",fillOpacity:.35}})(function(e){var t=e.classes,n=e.dims,a=n.leftX,r=n.y,s=n.width,o=n.height;return i.a.createElement("rect",{className:t.mask,x:a,y:r,width:2*s,height:o})})},4:function(e,t,n){"use strict";n.r(t);var a=n(18);n.d(t,"Image",function(){return a.default});var i=n(19);n.d(t,"ImageVeil",function(){return i.default})},52:function(e,t,n){e.exports=n(120)}},[[52,1,2]]]);
//# sourceMappingURL=main.75864dce.chunk.js.map